<div class="page-header">
  <h3 class="page-title">
    <span class="page-title-icon bg-gradient-primary text-white me-2">
        <i class="mdi mdi-account-multiple"></i></span> {{ class.department.name }} - {{ class.name }}
  </h3>
  <nav aria-label="breadcrumb">
    <ul class="breadcrumb flex gap-3 align-items-center">
      
      <li>
        <button hx-get="{% url 'get_class_course' class.department.slug class.id %}" hx-indicator="#htmx-indicator-full" hx-target="#main-content" hx-push-url="true" class="btn bg-gradient-primary"><i class="mdi mdi-refresh text-white"></i></button>
      </li>
      <li class="breadcrumb-item active" aria-current="page">
        <button data-bs-toggle="modal" data-bs-target="#departmentFileUploadModal" class="btn bg-gradient-primary text-white d-flex align-items-center gap-3" type="button"><i class="mdi mdi-cloud-upload"></i> Upload Course</button>
      </li>
      
      <li class="breadcrumb-item active" aria-current="page">
        <button data-bs-toggle="modal" data-bs-target="#departmentStudent" class="btn bg-gradient-primary text-white d-flex align-items-center gap-3" type="button"><i class="mdi mdi-cloud-upload"></i> Upload Students</button>
      </li>
    </ul>
  </nav>
</div>

<!-- NEW: Tabs Section -->
<div class="card">
  <div class="card-header p-2">
    <ul class="nav nav-tabs card-header-tabs" id="classTabs" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="courses-tab" data-bs-toggle="tab" data-bs-target="#courses" type="button" role="tab" aria-controls="courses" aria-selected="true">
          <i class="mdi mdi-book-open-variant me-2"></i>Courses
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="students-tab" data-bs-toggle="tab" data-bs-target="#students" type="button" role="tab" aria-controls="students" aria-selected="false">
          <i class="mdi mdi-account-group me-2"></i>Students
        </button>
      </li>
    </ul>
  </div>
  
  <div class="card-body">
    <div class="tab-content" id="classTabsContent">
      <!-- Courses Tab -->
      <div class="tab-pane fade show active" id="courses" role="tabpanel" aria-labelledby="courses-tab">
        {% if courses|length %}
          <table class="table table-hover">
            <thead>
              <tr class="p-3">
                <th>Course Title</th>
                <th>Course Code</th>
                <th>Course Exam Type</th>
              </tr>
            </thead>
            <tbody>
              {% for course in courses %}
                <tr>
                  <td>{{ course.name }}</td>
                  <td>{{ course.code }}</td>
                  <td>{{ course.exam_type }}</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        {% else %}
          <p class="text-center">Sorry, No data for {{ class.department.name|lower }} - {{ class.name }}.</p>
        {% endif %}
      </div>
      
      <!-- Students Tab -->
      <div class="tab-pane fade" id="students" role="tabpanel" aria-labelledby="students-tab">
        {% if students|length %}
          <table class="table table-hover">
            <thead>
              <tr class="p-3">
                <th>#</th>
                <th>Student Name</th>
                <th>Matric Number</th>
                <th>Email</th>
                <th>Phone Number</th>
              </tr>
            </thead>
            <tbody>
              {% for student in students %}
                <tr>
                  <td>{{ forloop.counter }}</td>
                  <td>{{ student.first_name }} {{ student.last_name }}</td>
                  <td>{{ student.matric_no }}</td>
                  <td>{{ student.email }}</td>
                  <td>{{ student.phone }}</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        {% else %}
          <p class="text-center">Sorry, No students for {{ class.department.name|lower }} - {{ class.name }}.</p>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<!-- Original Modals (unchanged) -->
<!-- Upload Course Modal -->
<div class="modal fade" id="departmentFileUploadModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalCenterTitle">Upload {{ class.name }} courses</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      
      <form hx-post="{% url 'upload_class_courses' class.id %}" hx-target="#alert" hx-encoding="multipart/form-data">
        <div class="modal-body">
          <div id="alert">
            
          </div>
          <input name="file" required style="display: none;" type="file" id="clsFile" />
          <label style="border: 2px dotted #333333; height: 150px; display: flex; justify-content: center; align-items: center; cursor: pointer;" for="clsFile" class="w-100">
            <div style="display: flex; flex-direction: column; row-gap: 8px; align-items: center;">
              <span><i class="mdi mdi-cloud-upload icon-lg"></i></span>
              <span id="fileName">Click to upload (only .csv files)</span>
            </div>
          </label>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary d-flex gap-3 align-items-center">Upload {% include 'dashboard/partials/loader.html' %}</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Upload Students Modal -->
<div class="modal fade" id="departmentStudent" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalCenterTitle">Upload {{ class.name }} students</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      
      <form hx-post="{% url 'upload_class_students' class.id %}" hx-target="#alert-student" hx-encoding="multipart/form-data">
        <div class="modal-body">
          <div id="alert-student">
            
          </div>
          <input name="file" required style="display: none;" type="file" id="studentFile" />
          <label style="border: 2px dotted #333333; height: 150px; display: flex; justify-content: center; align-items: center; cursor: pointer;" for="studentFile" class="w-100">
            <div style="display: flex; flex-direction: column; row-gap: 8px; align-items: center;">
              <span><i class="mdi mdi-cloud-upload icon-lg"></i></span>
              <span id="studentFileName">Click to upload (only .csv files)</span>
            </div>
          </label>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary d-flex gap-3 align-items-center">Upload {% include 'dashboard/partials/loader.html' %}</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>

  const fileInput = document.getElementById('clsFile')
  const fileName = document.getElementById('fileName')
  
  if (fileInput && fileName) {
    fileInput.addEventListener('change', (e) => {
      fileName.textContent = e.target.files[0].name
    })
  }

  // File input handler for students
  const studentFileInput = document.getElementById('studentFile')
  const studentFileName = document.getElementById('studentFileName')
  
  if (studentFileInput && studentFileName) {
    studentFileInput.addEventListener('change', (e) => {
      studentFileName.textContent = e.target.files[0].name
    })
  }

  function goBack() {
    window.history.back();
  }

</script>